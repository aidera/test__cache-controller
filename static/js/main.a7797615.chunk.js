(this.webpackJsonpcache_controller=this.webpackJsonpcache_controller||[]).push([[0],{60:function(e,t,a){e.exports={form:"AddCacheForm_form__3ANWt"}},61:function(e,t,a){e.exports={table:"CacheList_table__3boB4"}},65:function(e,t,a){e.exports=a(75)},70:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(56),c=a.n(l),o=a(37),i=a(38),u=a(63),s=a(64),h=(a(70),a(54)),m=a(36),f=a(50),C=a(60),E=a.n(C),v=r.a.memo((function(e){var t=e.chosenCachePair,a=e.addNewCachePair,l=Object(n.useState)(t[0]||""),c=Object(h.a)(l,2),o=c[0],i=c[1],u=Object(n.useState)(t[1]||""),s=Object(h.a)(u,2),C=s[0],v=s[1];return Object(n.useEffect)((function(){i(t[0]||""),v(t[1]||"")}),[t]),r.a.createElement("section",null,r.a.createElement(m.c,{initialValues:{cacheController__inputKey:o,cacheController__inputValue:C},enableReinitialize:!0,validationSchema:f.a({cacheController__inputKey:f.b().required("Required"),cacheController__inputValue:f.b().required("Required")}),onSubmit:function(e,t){a(e.cacheController__inputKey,e.cacheController__inputValue),i(""),v(""),t.resetForm();var n=document.querySelector("#cacheController__inputKey");n&&n.focus()}},(function(e){return r.a.createElement(m.b,{className:E.a.form},r.a.createElement("fieldset",null,r.a.createElement("label",{htmlFor:"cacheController__inputKey"},"Key"),r.a.createElement(m.a,{placeholder:"Enter key",type:"text",id:"cacheController__inputKey",name:"cacheController__inputKey"})),r.a.createElement("fieldset",null,r.a.createElement("label",{htmlFor:"cacheController__inputValue"},"Value"),r.a.createElement(m.a,{placeholder:"Enter value",type:"text",id:"cacheController__inputValue",name:"cacheController__inputValue"})),e.touched&&e.values.cacheController__inputKey&&e.values.cacheController__inputValue&&r.a.createElement("button",{type:"submit",className:"cacheController__button-save"},"Save"))})))})),d=r.a.memo((function(e){var t=e.cacheKey,a=e.cacheValue,n=e.setCachePairToForm;return r.a.createElement("tr",{onClick:function(){return n(t)}},r.a.createElement("td",null,t),r.a.createElement("td",null,a))})),p=a(61),y=a.n(p),g=r.a.memo((function(e){var t=e.cacheElements,a=e.setCachePairToForm;return r.a.createElement("section",null,r.a.createElement("table",{className:y.a.table},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Key"),r.a.createElement("th",null,"Value"))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement(d,{key:Object.keys(e)[0],cacheKey:Object.keys(e)[0],cacheValue:Object.values(e)[0],setCachePairToForm:a})})))))})),_=r.a.memo((function(e){var t=e.cacheElements,a=e.chosenCachePair,n=e.setCachePairToForm,l=e.addNewCachePair;return r.a.createElement("main",null,r.a.createElement("h1",null,"Cache controller"),r.a.createElement("div",{id:"cacheController"},r.a.createElement(v,{chosenCachePair:a,addNewCachePair:l}),r.a.createElement(g,{cacheElements:t,setCachePairToForm:n})))})),x=a(62),P=function(){function e(t,a,n){Object(o.a)(this,e),this.maxElementsCount=void 0,this.prefixStart=void 0,this.prefixCount=void 0,this.maxElementsCount=t,this.prefixStart=a||"CC__",this.prefixCount=n||"__COUNT"}return Object(i.a)(e,[{key:"withPrefix",value:function(e){return this.prefixStart+e}},{key:"withCountPrefix",value:function(e){return this.prefixStart+e+this.prefixCount}},{key:"clearPrefixStart",value:function(e){var t=new RegExp(this.prefixStart);return e.replace(t,"")}},{key:"clearPrefixCount",value:function(e){var t=new RegExp(this.prefixCount);return e.replace(t,"")}},{key:"clearAllPrefixes",value:function(e){var t=this.clearPrefixStart(e);return this.clearPrefixCount(t)}},{key:"getKeys",value:function(){for(var e=[],t=new RegExp(this.prefixCount),a=0;a<localStorage.length;a++){var n=localStorage.key(a);if(n&&null===n.match(t)){var r=this.clearAllPrefixes(n);e.push(r)}}return e}},{key:"getLessUsedElement",value:function(e){var t=this,a=null;return e.forEach((function(e){null===a?a=e:Number(localStorage.getItem(t.withCountPrefix(e)))<Number(localStorage.getItem(t.withCountPrefix(a)))&&(a=e)})),a}},{key:"isElementExistInStorage",value:function(e,t){return t.some((function(t){return e===t}))}},{key:"addElement",value:function(e,t){localStorage.setItem(this.withPrefix(e),t),localStorage.setItem(this.withCountPrefix(e),"0")}},{key:"editElement",value:function(e,t){localStorage.setItem(this.withPrefix(e),t)}},{key:"removeElement",value:function(e){localStorage.removeItem(this.withPrefix(e)),localStorage.removeItem(this.withCountPrefix(e))}},{key:"setElementsUsageCount",value:function(e){var t=localStorage.getItem(this.withCountPrefix(e));if(!!t){var a=Number(t),n=String(a+1);localStorage.setItem(this.withCountPrefix(e),n),console.log('key "'+e+'" updated its count: '+n)}}},{key:"get",value:function(e){return this.setElementsUsageCount(e),localStorage.getItem(this.withPrefix(e))}},{key:"set",value:function(e,t){var a=this.getKeys();if(this.isElementExistInStorage(e,a))this.editElement(e,t);else{if(a.length>=this.maxElementsCount){var n=this.getLessUsedElement(a);null!==n&&this.removeElement(n)}this.addElement(e,t)}this.setElementsUsageCount(e)}},{key:"getAll",value:function(){var e=this,t=this.getKeys(),a=[];return t.forEach((function(t){var n=localStorage.getItem(e.withPrefix(t));a.push(Object(x.a)({},t,n))})),a}}]),e}(),b=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).cacheController=new P(2),e.state={cacheElements:[],chosenCachePair:[]},e.setCachePairToForm=function(t){if(null!==t){var a=e.cacheController.get(t);e.setState({chosenCachePair:[t,a]})}},e.refreshCacheTable=function(){var t=e.cacheController.getAll();e.setState({cacheElements:t})},e.addNewCachePair=function(t,a){e.cacheController.set(t,a),e.refreshCacheTable()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.refreshCacheTable()}},{key:"render",value:function(){return r.a.createElement(_,{cacheElements:this.state.cacheElements,chosenCachePair:this.state.chosenCachePair,setCachePairToForm:this.setCachePairToForm,addNewCachePair:this.addNewCachePair})}}]),a}(r.a.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[65,1,2]]]);
//# sourceMappingURL=main.a7797615.chunk.js.map